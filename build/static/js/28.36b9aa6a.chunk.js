(window.webpackJsonp=window.webpackJsonp||[]).push([[28],{962:function(e,a,t){"use strict";t.r(a);var n=t(14),r=t.n(n),l=t(31),c=t(103),s=t(104),i=t(106),o=t(105),m=t(107),u=t(43),d=t(1),f=t.n(d),h=t(331),E=t(4),v=(t(367),t(368)),b=t.n(v),p=(t(369),t(351)),x=function(e){function a(e){var t;return Object(c.a)(this,a),(t=Object(i.a)(this,Object(o.a)(a).call(this,e))).onChange=function(e,a){var n=b.a.set(t.state.formData,e,a);t.setState({formData:n})},t.onAdd=function(){var e=Object(l.a)(r.a.mark(function e(a){var n;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=Object(u.a)(Object(u.a)(t)),!t.form.reportValidity()){e.next=13;break}if("form"!=t.state.id){e.next=9;break}return e.next=5,E.a.service("transferable-fixed").create(n.state.formData);case 5:void 0!=e.sent._id&&(window.location.href="/#/trasladables-fijos"),e.next=13;break;case 9:return e.next=11,E.a.service("transferable-fixed").patch(n.state.id,n.state.formData);case 11:void 0!=e.sent._id&&(window.location.href="/#/trasladables-fijos");case 13:case"end":return e.stop()}},e,this)}));return function(a){return e.apply(this,arguments)}}(),t.onAddcd=function(){var e=b.a.push(t.state,"formData.cd",{});t.setState(e)},t.removecd=function(e){return function(){var a=b.a.del(t.state.formData,["cd",e]);t.setState({formData:a})}},t.state={id:e.match.params.id,data:[],total:0,formData:{year:"",transmission:"",transmissionLow:"",distribution:"",scxnnomem:"",cenace:"",cd:[{dd:"",value:""}]},zonaDistribucion:[],openSuccess:!1,years:[{value:"2018",label:"2018"},{value:"2019",label:"2019"},{value:"2020",label:"2020"},{value:"2021",label:"2021"},{value:"2022",label:"2022"},{value:"2023",label:"2023"},{value:"2024",label:"2024"},{value:"2025",label:"2025"}]},t}return Object(m.a)(a,e),Object(s.a)(a,[{key:"componentWillMount",value:function(){var e=Object(l.a)(r.a.mark(function e(){var a,t,n;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("id",this.state.id),a=this,e.next=4,E.a.service("distribution-division").find({});case 4:if(t=(t=e.sent).data.map(function(e){return{value:e._id,label:e.distributionDivision}}),"form"==this.state.id){e.next=13;break}return e.next=9,E.a.service("transferable-fixed").find({query:{_id:a.state.id}});case 9:n=e.sent,a.setState({formData:{year:n.data[0].year||"",transmission:n.data[0].transmission||"",transmissionLow:n.data[0].transmissionLow||"",distribution:n.data[0].distribution||"",scxnnomem:n.data[0].scxnnomem||"",cenace:n.data[0].cenace||"",cd:n.data[0].cd},zonaDistribucion:t}),e.next=14;break;case 13:a.setState({zonaDistribucion:t});case 14:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e,a=this,t=this.state,n=t.formData,r=(t.openSuccess,t.years),l=t.zonaDistribucion;return f.a.createElement("div",{className:"animated fadeIn"},f.a.createElement("form",{ref:function(e){return a.form=e},className:"form-horizontal"},f.a.createElement(h.I,null,f.a.createElement(h.n,{col:"12",sm:"12",md:"12"},f.a.createElement(h.e,{onClick:this.onAdd,color:"success",className:"btn-square pull-right"},f.a.createElement("i",{className:"fa fa-save"})," Guardar"))),f.a.createElement("br",null),f.a.createElement(h.I,null,f.a.createElement(h.n,{xs:"12",lg:{size:4,offset:1}},f.a.createElement(h.h,null,f.a.createElement(h.l,null,"Trasladables Fijos",f.a.createElement("div",{className:"card-header-actions"},f.a.createElement("i",{className:"fa fa-download"}),f.a.createElement("a",{href:"javascript:void(0)",className:"card-header-action"},f.a.createElement("small",{className:"text-muted"},"Alta")))),f.a.createElement(h.i,null,f.a.createElement(h.r,null,f.a.createElement(h.x,{htmlFor:"hf-year"},"A\xf1o"),f.a.createElement(p.a,{placeholder:"-- Seleccionar",name:"year",value:(e=n.year,r.find(function(a){return a.value===e})),options:r,onChange:function(e){return a.onChange("year",e.value)}}),f.a.createElement(h.s,{className:"help-block"},"Seleccione a\xf1o *campo obligatorio")),f.a.createElement("hr",null),f.a.createElement(h.r,null,f.a.createElement(h.x,{htmlFor:"hf-transmission"},"Transmisi\xf3n (Mayor o igual 220 kV)"),f.a.createElement(h.t,{type:"text",id:"transmission",name:"transmission",value:n.transmission,onChange:function(e){return a.onChange("transmission",e.target.value)}}),f.a.createElement(h.s,{className:"help-block"})),f.a.createElement(h.r,null,f.a.createElement(h.x,{htmlFor:"hf-transmissionLow"},"Transmisi\xf3n ( Menor 220 kV)"," "),f.a.createElement(h.t,{type:"text",id:"transmissionLow",name:"transmissionLow",value:n.transmissionLow,onChange:function(e){return a.onChange("transmissionLow",e.target.value)}}),f.a.createElement(h.s,{className:"help-block"})),f.a.createElement(h.r,null,f.a.createElement(h.x,{htmlFor:"hf-distribution"},"Distribuci\xf3n"),f.a.createElement(h.t,{type:"text",id:"distribution",value:n.distribution,onChange:function(e){return a.onChange("distribution",e.target.value)}}),f.a.createElement(h.s,{className:"help-block"})),f.a.createElement(h.r,null,f.a.createElement(h.x,{htmlFor:"hf-scxnnomem"},"SCXN No MEM"),f.a.createElement(h.t,{type:"text",id:"scxnnomem",value:n.scxnnomem,onChange:function(e){return a.onChange("scxnnomem",e.target.value)}}),f.a.createElement(h.s,{className:"help-block"})),f.a.createElement(h.r,null,f.a.createElement(h.x,{htmlFor:"hf-scxnnomem"},"CENACE"),f.a.createElement(h.t,{type:"text",id:"cenace",value:n.cenace,onChange:function(e){return a.onChange("cenace",e.target.value)}}),f.a.createElement(h.s,{className:"help-block"}))))),f.a.createElement(h.n,{xs:"12",lg:{size:6}},f.a.createElement(h.h,null,f.a.createElement(h.l,null,"Informaci\xf3n de distribuci\xf3n",f.a.createElement("div",{className:"card-header-actions"},f.a.createElement("i",{className:"fa fa-download"}),f.a.createElement("a",{href:"javascript:void(0)",className:"card-header-action"},f.a.createElement("small",{className:"text-muted"},"Registrados -"," ",n.cd.length)))),f.a.createElement(h.i,null,n.cd.map(function(e,t){return f.a.createElement(h.I,{key:t+2},f.a.createElement(h.n,{md:5},f.a.createElement(h.r,null,f.a.createElement(h.x,{htmlFor:"hf-email"},"Divisi\xf3n de Distribuci\xf3n"),f.a.createElement(p.a,{placeholder:"-- Seleccione divisi\xf3n de distribuci\xf3n",name:"dd",value:(r=n.cd[t].dd,l.find(function(e){return e.value===r})),options:l,onChange:function(e){return a.onChange(["cd",t,"dd"],e.value)}}),f.a.createElement(h.s,{className:"help-block"},"Campo obligatorio"))),f.a.createElement(h.n,{md:5},f.a.createElement(h.r,null,f.a.createElement(h.x,{htmlFor:"hf-email"},"Valor"),f.a.createElement(h.t,{type:"text",id:"value",value:n.cd[t].value,onChange:function(e){return a.onChange(["cd",t,"value"],e.target.value)}}))),n.cd.length>t&&f.a.createElement(h.n,{md:1},f.a.createElement("label",{htmlFor:"addCD"},"\xa0"),f.a.createElement("div",{className:"form-group"},f.a.createElement(h.e,{color:"danger",onClick:a.removecd(t)},"-"))),n.cd.length-1==t&&f.a.createElement(h.n,{md:1},f.a.createElement("label",{htmlFor:"addCD"},"\xa0"),f.a.createElement("div",{className:"form-group"},f.a.createElement(h.e,{color:"primary",onClick:a.onAddcd},"+"))));var r})))))))}}]),a}(d.Component);a.default=x}}]);
//# sourceMappingURL=28.36b9aa6a.chunk.js.map