(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{964:function(e,a,t){"use strict";t.r(a);var r=t(14),n=t.n(r),l=t(31),o=t(103),c=t(104),s=t(106),i=t(105),m=t(107),d=t(43),u=t(575),p=t(1),h=t.n(p),E=t(438),b=t(331),g=t(469),f=t(694),v=t(360),C=t(328),x=t.n(C),y=t(470),k=function(e){function a(){return Object(o.a)(this,a),Object(s.a)(this,Object(i.a)(a).apply(this,arguments))}return Object(m.a)(a,e),Object(c.a)(a,[{key:"render",value:function(){var e=this.props,a=e.className,t=e.cssModule,r=e.header,n=e.mainText,l=e.smallText,o=e.color,c=e.value,s=e.children,i=e.variant,m=Object(v.a)(e,["className","cssModule","header","mainText","smallText","color","value","children","variant"]),d={style:"",color:o,value:c},u={style:"",bgColor:""};"inverse"===i&&(d.style="progress-white",d.color="",u.style="text-white",u.bgColor="bg-"+o);var p=Object(y.mapToCssModules)(x()(a,u.style,u.bgColor),t);return d.style=x()("progress-xs my-1",d.style),h.a.createElement(b.h,Object.assign({className:p},m),h.a.createElement(b.i,null,h.a.createElement("div",{className:"h4 m-0"},r),h.a.createElement("div",null,n),"0"!=c?h.a.createElement(b.H,{className:d.style,color:d.color,value:d.value}):null,h.a.createElement("small",{style:{fontSize:13},className:"text-muted"},l),h.a.createElement("div",null,s)))}}]),a}(p.Component);k.defaultProps={header:"89.9%",mainText:"Lorem ipsum...",smallText:"Lorem ipsum dolor sit amet enim.",value:"25",variant:""};var N=k,O=function(e){function a(){return Object(o.a)(this,a),Object(s.a)(this,Object(i.a)(a).apply(this,arguments))}return Object(m.a)(a,e),Object(c.a)(a,[{key:"render",value:function(){return h.a.createElement("div",{style:{height:this.props.height||"250px",paddingTop:this.props.paddingTop||"30%",textAlign:"center"}},h.a.createElement("i",{className:"fa fa-file",style:{fontSize:"17px"}}),h.a.createElement("p",{style:{fontSize:"17px"}},"No existe informaci\xf3n por cargar..."))}}]),a}(p.Component),S=t(4),w=t(351),j=t(347),I={labels:["","","","","","","","",""],datasets:[{label:"Consumo horario en KVARh",backgroundColor:"rgba(128, 204, 255, 0.4)",borderColor:"rgba(0, 138, 230, 1)",borderWidth:1,hoverBackgroundColor:"rgba(0, 138, 230, 0.4)",hoverBorderColor:"rgba(0, 138, 230, 1)",data:[1,2,3,4,5,6,7,8,9]}]},T=(g.CustomTooltips,Math.ceil(28),function(e){function a(e){var t;return Object(o.a)(this,a),(t=Object(s.a)(this,Object(i.a)(a).call(this,e))).state={CharEnergy:{},load:!1},t}return Object(m.a)(a,e),Object(c.a)(a,[{key:"componentWillMount",value:function(){var e=Object(l.a)(n.a.mark(function e(){return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.setState({CharEnergy:I,load:!1});case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){var e=Object(l.a)(n.a.mark(function e(){var a,t,r,l,o,c,s;return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a=0,t=0,r=[],l=[],o=this,console.log(this.props.labelsData),c=this.props.labelsData,s=this.props.valuesData,c&&setInterval(function(){var e=o.state.CharEnergy;if(a>=c.length&&(a=0,t=0,l=[],r=[]),9===t){r.push(c[a]),l.push(s[a]);var n=Object(j.a)({},e);n.labels=r,n.datasets[0].data=l;var i=Object(j.a)({},o.state,{CharEnergy:n});o.setState(i),o.setState({load:!0}),l=[],r=[],t=0}else r.push(c[a]),l.push(s[a]),t++,a++},400);case 9:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,a=e.CharEnergy;return e.load?h.a.createElement(E.b,{data:a,options:this.props.options}):h.a.createElement("div",{style:{height:"350px",paddingTop:"155px",textAlign:"center"}},h.a.createElement("i",{className:"fa fa-refresh",style:{fontSize:"17px"}}),h.a.createElement("p",{style:{fontSize:"17px"}},"Cargando..."))}}]),a}(p.Component)),D=(t(695),t(364)),A=t.n(D),M=t(334),R=t(697);function z(){var e=Object(u.a)(["\n    display: block;\n    margin: 0 auto;\n    border-color: red;\n"]);return z=function(){return e},e}var B=Object(M.css)(z()),F=(Object(f.getStyle)("--primary"),Object(f.getStyle)("--success")),P=Object(f.getStyle)("--info"),H=(Object(f.getStyle)("--warning"),Object(f.getStyle)("--danger"),[{label:"Historico",backgroundColor:P,borderColor:"rgba(255,255,255,.55)",data:[]}]),L=(g.CustomTooltips,Math.min.apply(Math,H[0].data),Math.max.apply(Math,H[0].data),{tooltips:{enabled:!1,custom:g.CustomTooltips},maintainAspectRatio:!1,scales:{xAxes:[{gridLines:{drawOnChartArea:!1}}],yAxes:[{ticks:{beginAtZero:!0,maxTicksLimit:5,stepSize:Math.ceil(5e3),max:25e3}}]}});var W={labels:["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],datasets:[{label:"Costo CFE",backgroundColor:Object(f.hexToRgba)(P,10),borderColor:P,pointHoverBackgroundColor:"#fff",borderWidth:2,data:[]},{label:"Costo IPCO",backgroundColor:"transparent",borderColor:F,pointHoverBackgroundColor:"#fff",borderWidth:2,data:[]}]},$=(g.CustomTooltips,Math.ceil(28),{tooltips:{enabled:!1,custom:g.CustomTooltips,intersect:!0,mode:"index",position:"nearest",callbacks:{labelColor:function(e,a){return{backgroundColor:a.data.datasets[e.datasetIndex].borderColor}}}},maintainAspectRatio:!1,legend:{display:!1},scales:{xAxes:[{gridLines:{drawOnChartArea:!1}}],yAxes:[{ticks:{beginAtZero:!0,maxTicksLimit:5,stepSize:Math.ceil(5e3),max:25e3}}]},elements:{point:{radius:0,hitRadius:10,hoverRadius:4,hoverBorderWidth:3}}}),V=(g.CustomTooltips,Math.ceil(20),{labels:[],datasets:[{label:"Consumo horario en KVARh",backgroundColor:"rgba(128, 204, 255, 0.4)",borderColor:"rgba(0, 138, 230, 1)",borderWidth:1,hoverBackgroundColor:"rgba(0, 138, 230, 0.4)",hoverBorderColor:"rgba(0, 138, 230, 1)",data:[]}]}),J=function(e){function a(e){var t;return Object(o.a)(this,a),(t=Object(s.a)(this,Object(i.a)(a).call(this,e))).onChangeEmpresa=function(e){t.getDashboardInfo(e),t.setState({selectedEmpresa:e})},t.loading=function(){return h.a.createElement("div",{className:"animated fadeIn pt-1 text-center"},"Loading...")},t.getDashboardInfo=function(){var e=Object(l.a)(n.a.mark(function e(a){var r;return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.a.service("dashboard").get(a);case 2:r=e.sent,console.log(r),t.setState({dataEnergy:r,loadChart:!0,costsDifferences:r.costsDifferences,invoicesHistory:r.invoicesHistory,powerFactorData:r.powerFactorData,currentMonth:r.currentMonth,dmaxima:r.potencyData.dmaxima});case 5:case"end":return e.stop()}},e,this)}));return function(a){return e.apply(this,arguments)}}(),t.toggle=t.toggle.bind(Object(d.a)(Object(d.a)(t))),t.onRadioBtnClick=t.onRadioBtnClick.bind(Object(d.a)(Object(d.a)(t))),t.state={loading:!0,dropdownOpen:!1,radioSelected:2,recordSelected:!1,empresas:[],loadChart:!1,dataEnergy:{labels:[],energyConsumptionData:[],reactiveEnergyConsumptionData:[]},selectedEmpresa:"",labels:[],energyConsumptionData:[],reactiveEnergyConsumptionData:[],costsDifferences:{},invoicesHistory:[],powerFactorData:"",currentMonth:"",dmaxima:""},t}return Object(m.a)(a,e),Object(c.a)(a,[{key:"componentWillMount",value:function(){var e=Object(l.a)(n.a.mark(function e(){var a;return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.a.service("subsidiary").find({});case 2:a=(a=e.sent).data.map(function(e){return{value:e._id,label:e.nombre}}),this.setState({empresas:a,CharEnergy:V});case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"toggle",value:function(){this.setState({dropdownOpen:!this.state.dropdownOpen})}},{key:"onRadioBtnClick",value:function(e){this.setState({radioSelected:e})}},{key:"onStateChart",value:function(e){this.setState({recordSelected:e})}},{key:"render",value:function(){var e=this,a=this.state,t=a.empresas,r=a.selectedEmpresa,n=(a.labels,a.dataEnergy),l=a.powerFactorData,o=(a.loadChart,a.reactiveEnergyConsumptionData,a.energyConsumptionData,a.costsDifferences),c=a.invoicesHistory,s=a.currentMonth,i=a.dmaxima;console.log("dmaxima",i);var m,d={labels:["CFE - $"+A()(void 0!==o.costCfe?o.costCfe.toString():0).format("0,0.00"),"IPCO - $"+A()(void 0!==o.costIpco?o.costIpco.toString():0).format("0,0.00")],datasets:[{label:"Costo de consumo",backgroundColor:"rgba(0, 179, 0, 0.3)",borderColor:"rgba(0, 179, 0, 1)",borderWidth:1,hoverBackgroundColor:"rgba(0, 179, 0, 0.4)",hoverBorderColor:"rgba(0, 179, 0, 1)",data:[o.costCfe,o.costIpco]}]},u=function(a){return h.a.createElement("div",{style:{backgroundColor:"white",width:"auto",height:"auto",marginBottom:30,boxSizing:"border-box",border:"1px solid #c8ced3"}},h.a.createElement("div",{style:{padding:"1.25rem",marginTop:17,alignContent:"center",alignItems:"center"}},h.a.createElement(R.BarLoader,{css:B,sizeUnit:"px",size:60,color:"#023C52",loading:e.state.loading})))};return h.a.createElement("div",{className:"animated fadeIn"},h.a.createElement(b.I,null,h.a.createElement(b.n,{xs:"12",sm:"6",lg:"6"},h.a.createElement(w.a,{placeholder:"-- Seleccione Centro de Carga",name:"empresa",options:t,value:(m=r,t.find(function(e){return e.value===m})),onChange:function(a){return e.onChangeEmpresa(a.value)}}),h.a.createElement("br",null))),r?h.a.createElement("div",null,n.labels!==[]&&n.energyConsumptionData!==[]&&n.reactiveEnergyConsumptionData!==[],h.a.createElement(b.I,null,h.a.createElement(b.n,{xs:"12",sm:"6",lg:"6"},h.a.createElement(b.h,null,h.a.createElement(b.l,null,"ENERG\xcdA - kWh",h.a.createElement("div",{className:"card-header-actions"},h.a.createElement("a",{href:"http://ipco.com",className:"card-header-action"},h.a.createElement("small",{className:"text-muted"},"kWh")))),h.a.createElement(b.i,{style:{height:470}},h.a.createElement("div",{className:"chart-wrapper"},0!=n.labels.length?h.a.createElement(T,{labelsData:n.labels,valuesData:n.energyConsumptionData}):h.a.createElement(O,{height:"100%"}))))),h.a.createElement(b.n,{xs:"12",sm:"6",lg:"6"},h.a.createElement(b.h,null,h.a.createElement(b.l,null,"ENERG\xcdA REACTIVA - KVARh",h.a.createElement("div",{className:"card-header-actions"},h.a.createElement("a",{href:"http://ipco.com",className:"card-header-action"},h.a.createElement("small",{className:"text-muted"},"KVARh")))),h.a.createElement(b.i,{style:{height:470}},h.a.createElement("div",{className:"chart-wrapper"},0!=n.labels.length?h.a.createElement(T,{labelsData:n.labels,valuesData:n.reactiveEnergyConsumptionData}):h.a.createElement(O,{height:"100%"})))))),h.a.createElement(b.I,null,h.a.createElement(b.n,{xs:"12",sm:"4",lg:"4"},void 0!==l&&""!==l?h.a.createElement(N,{color:"primary",header:String(A()(l).format("0,0.00"))||"No existe informaci\xf3n...",mainText:"Factor Potencia",smallText:"Periodo anterior - "+s.toUpperCase(),value:"0"}):h.a.createElement(u,null)),h.a.createElement(b.n,{xs:"12",md:"4",xl:"4"},void 0!==i&&""!==i?h.a.createElement(N,{color:"info",header:i+" - kw",mainText:"Demanda maxima",smallText:"Demanda contratada 250 kw",value:"0"}):h.a.createElement(u,null)),h.a.createElement(b.n,{xs:"12",md:"4",xl:"4"},void 0!==o.costIpco?h.a.createElement(N,{color:"success",variant:"inverse",header:"Pago de ultimo periodo: $"+A()(void 0!==o.costIpco?o.costIpco.toString():"0").format("0,0.00"),mainText:"Gracias",smallText:"Ultima factura generada",value:String(o.costIpco)||"0"}):h.a.createElement(u,null))),h.a.createElement(b.I,null,h.a.createElement(b.n,{xs:"12",md:"12",xl:"12"},h.a.createElement(b.h,null,h.a.createElement(b.i,null,h.a.createElement("h5",{className:"mb-0 card-title"},"Historial de facturaci\xf3n"),h.a.createElement("br",null),0!==c.length?h.a.createElement(b.L,{hover:!0,responsive:!0,className:"table-outline mb-0 d-none d-sm-table"},h.a.createElement("thead",{className:"thead-light"},h.a.createElement("tr",null,h.a.createElement("th",null,"Periodo"),h.a.createElement("th",{width:"55%"},"Detalle"),h.a.createElement("th",{className:"text-center"},"Recibo o factura"))),h.a.createElement("tbody",null,0!==c.length&&void 0!==c?c.map(function(e,a){return h.a.createElement("tr",{key:e._id},h.a.createElement("td",null,h.a.createElement("div",null,void 0!==e.mes?e.mes.toUpperCase():" -- "),h.a.createElement("small",{className:"text-muted"},"Pendiente de Pago")),h.a.createElement("td",null,h.a.createElement("div",{className:"clearfix"},h.a.createElement("div",{className:"float-left"},h.a.createElement("strong",null,"Energ\xeda")),h.a.createElement("div",{className:"float-right"},h.a.createElement("small",{className:"text-muted",style:{fontSize:13}},"$",A()(void 0!==e.breakdown.energy?e.breakdown.energy:0).format("0,0.00")))),h.a.createElement("div",{className:"clearfix"},h.a.createElement("div",{className:"float-left"},h.a.createElement("strong",null,"IVA 16%")),h.a.createElement("div",{className:"float-right"},h.a.createElement("small",{className:"text-muted",style:{fontSize:13}},"$"," ",A()(void 0!==e.breakdown.iva?e.breakdown.iva:0).format("0,0.00")))),h.a.createElement("div",{className:"clearfix"},h.a.createElement("div",{className:"float-left"},h.a.createElement("strong",null,"Fact del Periodo")),h.a.createElement("div",{className:"float-right"},h.a.createElement("small",{className:"text-muted",style:{fontSize:13}},"$",A()(void 0!==e.breakdown.powerFactor?e.breakdown.powerFactor:0).format("0,0.00")))),h.a.createElement("div",{className:"clearfix"},h.a.createElement("div",{className:"float-left"},h.a.createElement("strong",null,"Total")),h.a.createElement("div",{className:"float-right"},h.a.createElement("strong",null,"$",A()(void 0!==e.breakdown.total?e.breakdown.total:0).format("0,0.00"))))),h.a.createElement("td",{className:"text-center"},h.a.createElement("i",{className:"fa fa-file-pdf-o",style:{fontSize:"24px"}}),h.a.createElement("i",{className:"fa fa-file-code-o",style:{fontSize:"24px",marginLeft:15}})))}):null)):h.a.createElement(O,{paddingTop:"75px"}))))),!1===this.state.recordSelected&&o.costCfe>o.costIpco&&0!==o.costIpco&&0!==o.costCfe?h.a.createElement(b.I,null,h.a.createElement(b.n,{xs:"12",sm:"2",lg:"2"}),h.a.createElement(b.n,{xs:"12",sm:"5",lg:"5"},h.a.createElement(b.h,null,h.a.createElement(b.i,null,h.a.createElement(b.I,null,h.a.createElement(b.n,{sm:"12"},h.a.createElement(b.m,{className:"mb-0"},"Descubre los beneficios que IPCO te ofrece"),h.a.createElement("div",{className:"small text-muted"},"Ahorro respecto a CFE"))),h.a.createElement("div",{className:"chart-wrapper"},h.a.createElement(E.a,{data:d,options:L}))),h.a.createElement(b.j,null,h.a.createElement(b.I,null,h.a.createElement(b.n,{xs:"6",md:"8",xl:"8"}),h.a.createElement(b.n,{xs:"6",md:"4",xl:"4"},h.a.createElement(b.e,{block:!0,color:"secondary",className:"btn-square",onClick:function(){return e.onStateChart(!0)}},"Historial")))))),h.a.createElement(b.n,{xs:"12",sm:"3",lg:"3"},h.a.createElement(N,{color:"success",variant:"inverse",header:"$"+A()(void 0!==o.costCfe?o.costCfe.toString():"0").format("0,0.00"),mainText:"Costo CFE",smallText:"Moneda mexicana",value:void 0!==o.costCfe?o.costCfe.toString():"0"}),h.a.createElement(N,{color:"default",header:"$"+A()(void 0!==o.costIpco?o.costIpco.toString():"0").format("0,0.00"),mainText:"Costo IPCO",smallText:"Moneda mexicana",value:void 0!==o.costIpco?o.costIpco.toString():"0"}),h.a.createElement(N,{color:"warning",variant:"inverse",header:"AHORRO: $"+A()(void 0!==o.totalSaved?o.totalSaved.toString():"0").format("0,0.00"),mainText:"Su ahorro respecto a CFE",smallText:"Moneda mexicana",value:void 0!==o.totalSaved?o.totalSaved.toString():"0"}))):null,!0===this.state.recordSelected?h.a.createElement(b.I,null,h.a.createElement(b.n,null,h.a.createElement(b.h,null,h.a.createElement(b.i,null,h.a.createElement(b.I,null,h.a.createElement(b.n,{sm:"5"},h.a.createElement(b.m,{className:"mb-0"},"HISTORIAL DE AHORRO RESPECTO CFE - 2018"),h.a.createElement("div",{className:"small text-muted"},"Descubre los beneficios de los servicios IPCO")),h.a.createElement(b.n,{sm:"7",className:"d-none d-sm-inline-block"},h.a.createElement(b.e,{color:"primary",className:"float-right"},h.a.createElement("i",{className:"icon-cloud-download"})),h.a.createElement(b.g,{className:"float-right","aria-label":"Toolbar with button groups"},h.a.createElement(b.f,{className:"mr-3","aria-label":"First group"},h.a.createElement(b.e,{color:"outline-secondary",onClick:function(){return e.onRadioBtnClick(2)},active:2===this.state.radioSelected},"Mes"),h.a.createElement(b.e,{color:"outline-secondary",onClick:function(){return e.onRadioBtnClick(3)},active:3===this.state.radioSelected},"A\xf1o"))))),h.a.createElement("div",{className:"chart-wrapper",style:{height:"300px",marginTop:"40px"}},h.a.createElement(E.b,{data:W,options:$}))),h.a.createElement(b.j,null,h.a.createElement(b.I,null,h.a.createElement(b.n,{xs:"6",md:"8",xl:"8"}),h.a.createElement(b.n,{xs:"6",md:"4",xl:"4"},h.a.createElement(b.e,{block:!0,color:"secondary",className:"btn-square",onClick:function(){return e.onStateChart(!1)}},"Cerrar"))))))):null):null)}}]),a}(p.Component);a.default=J}}]);
//# sourceMappingURL=16.9ca54019.chunk.js.map