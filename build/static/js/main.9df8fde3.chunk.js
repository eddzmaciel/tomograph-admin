(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{109:function(e,t,n){"use strict";var a=n(14),o=n.n(a),r=n(31),c=n(4);t.a={authenticate:function(){var e=Object(r.a)(o.a.mark(function e(){var t,n,a,r;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.a.passport.getJWT();case 2:return t=e.sent,e.next=5,c.a.authenticate({strategy:"jwt",accessToken:t});case 5:return n=e.sent,e.next=8,c.a.passport.verifyJWT(n.accessToken);case 8:return a=e.sent,e.next=11,c.a.service("users").get(a.userId);case 11:r=e.sent,c.a.set("user",r),console.log("authenticated",n,r);case 14:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),login:function(){var e=Object(r.a)(o.a.mark(function e(t,n){var a,r,s;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.a.authenticate({strategy:"local",email:t,password:n});case 2:return a=e.sent,e.next=5,c.a.passport.verifyJWT(a.accessToken);case 5:return r=e.sent,e.next=8,c.a.service("users").get(r.userId);case 8:s=e.sent,c.a.set("user",s),console.log("Login",a,s);case 11:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),logout:function(){var e=Object(r.a)(o.a.mark(function e(){var t;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.a.logout();case 2:t=e.sent,console.log("Logout",t);case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()}},184:function(e,t,n){e.exports=n(326)},263:function(e,t,n){},270:function(e,t,n){},303:function(e,t){},326:function(e,t,n){"use strict";n.r(t);n(185),n(213),n(214),n(242),n(246),n(248);!function(){if("function"===typeof window.CustomEvent)return!1;function e(e,t){t=t||{bubbles:!1,cancelable:!1,detail:void 0};var n=document.createEvent("CustomEvent");return n.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),n}e.prototype=window.Event.prototype,window.CustomEvent=e}();var a=n(1),o=n.n(a),r=n(108),c=n.n(r),s=(n(263),n(163),n(14)),i=n.n(s),u=n(31),l=n(103),d=n(104),g=n(106),m=n(105),f=n(107),p=n(43),h=n(968),v=n(970),w=n(950),b=n(966),x=n(41),E=n.n(x),j=(n(270),n(276),n(4)),k=n(109),y=function(){return o.a.createElement("div",{className:"animated fadeIn pt-3 text-center"},"Loading...")},O=E()({loader:function(){return Promise.all([n.e(3),n.e(34),n.e(8)]).then(n.bind(null,967))},loading:y}),P=E()({loader:function(){return Promise.all([n.e(3),n.e(9)]).then(n.bind(null,951))},loading:y}),C=E()({loader:function(){return Promise.all([n.e(3),n.e(10)]).then(n.bind(null,952))},loading:y}),T=E()({loader:function(){return Promise.all([n.e(3),n.e(11)]).then(n.bind(null,953))},loading:y}),I=E()({loader:function(){return Promise.all([n.e(3),n.e(12)]).then(n.bind(null,954))},loading:y}),J=function(e){function t(e){var n;Object(l.a)(this,t),(n=Object(g.a)(this,Object(m.a)(t).call(this,e)))._authenticate=Object(u.a)(i.a.mark(function e(){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.a.authenticate();case 2:n.setState({loading:!1,loged:!0});case 3:case"end":return e.stop()}},e,this)}));var a=Object(p.a)(Object(p.a)(n));return n.state={loading:!0,loged:!1},window.addEventListener("unhandledrejection",function(e){console.log("event",e),"No auth token"!==e.reason.message&&"Authentication timed out"!==e.reason.message&&"jwt expired"!==e.reason.message||a.setState({loged:!1,loading:!1})}),j.a.on("logout",function(e){console.log("logout event",e),a.setState({loged:!1})}),j.a.on("authenticated",function(e){a.setState({loged:!0})}),n._authenticate(),n}return Object(f.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){return o.a.createElement(h.a,null,this.state.loading?o.a.createElement("div",null,"Cargando..."):o.a.createElement(v.a,null,o.a.createElement(w.a,{exact:!0,path:"/register",name:"Register Page",component:C}),o.a.createElement(w.a,{exact:!0,path:"/404",name:"Page 404",component:T}),o.a.createElement(w.a,{exact:!0,path:"/500",name:"Page 500",component:I}),this.state.loged?o.a.createElement(w.a,{path:"/",name:"Inicio",component:O}):o.a.createElement(v.a,null,o.a.createElement(w.a,{exact:!0,path:"/",name:"Login Page",component:P}),o.a.createElement(b.a,{to:"/"}))))}}]),t}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(o.a.createElement(J,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},4:function(e,t,n){"use strict";var a=n(180),o=n.n(a),r=n(102),c=n.n(r),s=n(307),i=o()("https://feathers-aida.softwareland.mx"),u=c()();u.configure(c.a.socketio(i,{timeout:9e4})),u.configure(s({storage:window.localStorage})),t.a=u}},[[184,35,32]]]);
//# sourceMappingURL=main.9df8fde3.chunk.js.map